<div #mapContainer class="map-container"></div>

<input type="file" #imageInput hidden (change)="onImageFileSelected($event)" accept="image/png, image/jpeg, image/gif" />

<div class="controls-container" *ngIf="imageOverlay">
    <div>
        <label for="scale-slider">Scale:</label>
        <input 
            type="range" 
            id="scale-slider" 
            min="0.1" 
            max="5" 
            step="0.05" 
            [(ngModel)]="imageScale" 
            (input)="autoSaveState()"
        />
        <span>{{ imageScale.toFixed(2) }}</span>
    </div>
    <div>
        <label for="rotation-slider">Rotation:</label>
        <input 
            type="range" 
            id="rotation-slider" 
            min="-180" 
            max="180" 
            step="1" 
            [(ngModel)]="imageRotation" 
            (input)="autoSaveState()"
        />
        <span>{{ imageRotation }}¬∞</span>
    </div>
    <div class="button-group">
        <button (click)="removeImage()">Remove Image</button>
        <button (click)="resetMap()" class="reset-button">Reset Map</button>
    </div>
</div>

<div class="leaflet-control-container">
    <div class="leaflet-top leaflet-right">
        <div class="leaflet-control leaflet-bar" *ngIf="imageOverlay">
            <div class="opacity-control-container">
                <label for="opacity-slider" title="Image Opacity">üñºÔ∏è Opacity</label>
                <input 
                  type="range" 
                  id="opacity-slider"
                  class="opacity-slider"
                  min="0" 
                  max="1" 
                  step="0.05"
                  [(ngModel)]="imageOpacity"
                  (input)="onOpacityChange()"
                />
            </div>
        </div>
    </div>
</div>